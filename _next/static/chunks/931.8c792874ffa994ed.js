(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4146:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return c},getImageProps:function(){return l}});let o=n(306),r=n(666),a=n(7970),i=o._(n(5514));function l(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/kids-finger/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,n]of Object.entries(t))void 0===n&&delete t[e];return{props:t}}let c=a.Image},9931:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var o=n(5155),r=n(4146),a=n.n(r),i=n(2115),l=n(1819),c=n.n(l),s=n(1101),u=n.n(s),m=n(8173),_=n.n(m);function d(e){let{poem:t,initialPage:n,totalPoems:r,onPageChange:l}=e,s=(0,i.useRef)(null),[m,d]=(0,i.useState)(null),[f,p]=(0,i.useState)(n),[h,v]=(0,i.useState)(!1),[w,g]=(0,i.useState)(0),[x,P]=(0,i.useState)(0);(0,i.useEffect)(()=>{p(n)},[n]),(0,i.useEffect)(()=>{let e=e=>{"ArrowRight"===e.key&&f>1?l(f-1):"ArrowLeft"===e.key&&f<r&&l(f+1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[f,r,l]);let N=(0,i.useCallback)(()=>{},[]),b=(0,i.useCallback)(e=>{e.preventDefault(),s.current&&(s.current.scrollLeft+=e.deltaY)},[]);return(0,i.useEffect)(()=>{let e=s.current;if(e)return e.addEventListener("wheel",b,{passive:!1}),()=>e.removeEventListener("wheel",b)},[b]),(0,o.jsxs)("section",{className:"".concat(c().container," ").concat(u().className),onTouchStart:e=>{d(e.touches[0].clientX)},onTouchEnd:e=>{if(!m)return;let t=m-e.changedTouches[0].clientX;if(s.current){let{scrollLeft:e,scrollWidth:t,clientWidth:n}=s.current;if(!(e+n>=t-10)&&t>n)return}Math.abs(t)>50&&(t>0&&f>1?l(f-1):t<0&&f<r&&l(f+1)),d(null)},"aria-label":"詩の表示エリア",children:[(0,o.jsx)("div",{className:c().imageContainer,children:(0,o.jsx)(a(),{src:"/kids-finger/images/poems/".concat(f,".jpg"),alt:t.title,fill:!0,className:c().image,priority:!0})}),(0,o.jsxs)("div",{className:c().poemContainer,ref:s,onScroll:N,onMouseDown:e=>{s.current&&(v(!0),g(e.pageX-s.current.offsetLeft),P(s.current.scrollLeft))},onMouseMove:e=>{if(h&&(e.preventDefault(),s.current)){let t=e.pageX-s.current.offsetLeft;s.current.scrollLeft=x-(t-w)*2}},onMouseUp:()=>{v(!1)},onMouseLeave:()=>{v(!1)},children:[(0,o.jsx)("h1",{className:c().title,children:t.title}),(0,o.jsx)("div",{className:c().content,children:t.content.split("\n").map((e,t)=>(0,o.jsx)("div",{className:c().line,children:e},"".concat(e.slice(0,10),"-").concat(t)))})]}),(0,o.jsxs)("div",{className:c().pageIndicator,children:[f," / ",r]}),f>1&&(0,o.jsx)("button",{onClick:()=>{f>1&&l(f-1)},className:"".concat(c().navButton," ").concat(c().prevButton),"aria-label":"前のページ",type:"button"}),f<r&&(0,o.jsx)("button",{onClick:()=>{f<r&&l(f+1)},className:"".concat(c().navButton," ").concat(c().nextButton),"aria-label":"次のページ",type:"button"}),(0,o.jsx)(_(),{href:"/",className:"".concat(c().homeButton," group"),"aria-label":"トップページに戻る",children:(0,o.jsx)("span",{className:"relative text-2xl text-white md:text-xl",children:"⌂"})})]})}},1819:e=>{e.exports={container:"PoemViewer_container__6zVYC",imageContainer:"PoemViewer_imageContainer__zysY8",image:"PoemViewer_image__u4IxD",poemContainer:"PoemViewer_poemContainer__t3KHD",title:"PoemViewer_title__wuTWZ",content:"PoemViewer_content__EdOVP",line:"PoemViewer_line__TGhGj",pageIndicator:"PoemViewer_pageIndicator__2INPZ",navButton:"PoemViewer_navButton__A79F4",prevButton:"PoemViewer_prevButton__TNXYK",nextButton:"PoemViewer_nextButton__22tyI",scrollIndicator:"PoemViewer_scrollIndicator__UVj1c",hide:"PoemViewer_hide__FB125",homeButton:"PoemViewer_homeButton__8vQSx"}},1101:e=>{e.exports={style:{fontFamily:"'Noto Serif JP', 'Noto Serif JP Fallback'",fontStyle:"normal"},className:"__className_779255"}}}]);